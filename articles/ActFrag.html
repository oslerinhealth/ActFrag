<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ActFrag • ActFrag</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="ActFrag">
<meta property="og:description" content="ActFrag">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ActFrag</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/ActFrag.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/junruidi/ActFrag/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="ActFrag_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>ActFrag</h1>
                        <h4 data-toc-skip class="author">Junrui Di</h4>
            
            <h4 data-toc-skip class="date">6/24/2018</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/junruidi/ActFrag/blob/master/vignettes/ActFrag.Rmd" class="external-link"><code>vignettes/ActFrag.Rmd</code></a></small>
      <div class="hidden name"><code>ActFrag.Rmd</code></div>

    </div>

    
    
<p>This is the vignette for <code>ActFrag</code>. This package extracts commonly used fragmention features from minute level actigraphy data. Recent studies haven shown that, on top of total daily active/sedentary volumes, the time accumulation strategies provide more sensitive information. This package provides functions to extract commonly used fragmentation metrics to quantidy such time accumulation strategies based on minute level actigraphy-measured activity counts data.</p>
<p>To download the package from Github</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"junruidi/ActFrag"</span><span class="op">)</span></code></pre></div>
<p>And to load in the package into the R environment</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/junruidi/ActFrag" class="external-link">ActFrag</a></span><span class="op">)</span></code></pre></div>
<div id="data" class="section level2">
<h2 class="hasAnchor">
<a href="#data" class="anchor" aria-hidden="true"></a>1. Data</h2>
<p>The expected data should consider at least one data frame of minute level activity counts, stored in a format of <code>data.frame</code> of dimension <span class="math inline">\((\sum_i d_i) \times 1442\)</span>, where <span class="math inline">\(d_i\)</span> is the number of available days for subject i.And the order of the 1442 columns (and corresponding column names) should be “ID”,“Day”,“MIN1”,…“MIN1440”.</p>
<p>It is preferrable that user can also provide a <code>data.frame</code> of wear/non-wear flag as same dimension of the activity counts. This flag data can serve as the following purposes:</p>
<ol style="list-style-type: decimal">
<li>Define time regions where the subjects were wearing the devices. E.g. in NHANES 2003 - 2006, protocol required subjects to remove the devices when sleep. Certian non-wear detection algorithms can be used (see package <a href="https://github.com/andrew-leroux/rnhanesdata" class="external-link"><code>rnahnesdata</code></a> ).</li>
<li>Separate sleep and wake period to derive domain specific features. E.g. when actigraphy record is paired with a sleep log, or when the device has built in sleep detecting algorithms.</li>
<li>Define regions where features should be calcualted. E.g, we want features to be calculated only for 5:00AM to 11:00PM.</li>
</ol>
<p>Thbe wear/nonwear flag data should only consist of entries 0/1 representing nonwear/wear, sleep/wake, regions of interest/regions of interests, respectively. This is especially crucial for calculating features like total sedentary time, fragmentation etc. Because, we are not supposed to mix sedentary with sleep.</p>
<p>If no wear/nonwear flag data is supplied, users can create one using the <code>wear_flag</code> function providing the time region:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">example_activity_data</span><span class="op">)</span>
<span class="va">count</span> <span class="op">=</span> <span class="va">example_activity_data</span><span class="op">$</span><span class="va">count</span>
<span class="va">weartime</span> <span class="op">=</span> <span class="fu"><a href="../reference/wear_flag.html">wear_flag</a></span><span class="op">(</span>count.data <span class="op">=</span> <span class="va">count</span>, start <span class="op">=</span> <span class="st">"06:00"</span>, end <span class="op">=</span> <span class="st">"23:00"</span><span class="op">)</span></code></pre></div>
<p>In this version, we only incorporate type 3 . For 1 and 2 there are more appropriate softwares to look for.</p>
</div>
<div id="fragmentation-metrics" class="section level2">
<h2 class="hasAnchor">
<a href="#fragmentation-metrics" class="anchor" aria-hidden="true"></a>2. Fragmentation metrics</h2>
<p>Frequently, studies extract total time spent in sedentary behavior (e.g., total sedentary minutes per day) or proportion of waking hours spent sedentary. More advanced techniques have examined the effect of replacing sedentary time with active time spent either in light or moderate-vigorous intensity. For example, isotemporal substitution modeling) and compositional data analysis examine the combined effects of time spent sedentary, light and moderate-vigorous activity, and sleep while taking into account the codependence due to finite time during a day. Yet, most studies typically only use total volume of sedentary time while ignoring the potential importance of accumulation patterns. Recent studies have suggested that such patterns (known as prolonged sedentary bouts) may provide additional sensitivity to predict health outcomes and provide additional information beyond total volume of sedentary time.</p>
<p>Fragmentation metrics study the accumulation pattern of TST and TAT by quantifying the alternating these sequences via summaries of duration of and fre- quency of switching between sedentary and active bouts. They provide unique translatable insights into accumulation patterns for sedentary and active time and lead to additional findings of associations between those patterns and health outcomes on top of total sedentary volume Here is the list of available fragmentation metrics:</p>
<ul>
<li>average bout duration: bout/minute</li>
<li>transition probability: reexpressed as the reciprocal of averge bout durations</li>
<li>Gini index: absolute variability normalized to the average bout duration</li>
<li>average hazard</li>
<li>power law distribution parameter</li>
</ul>
<p>We can calculate the above mentioned metrics for both sedentary and active bout. Details about fragmentations can be found <a href="https://www.biorxiv.org/content/early/2017/08/31/182337" class="external-link">here</a>.</p>
<p><code>fragmentation</code> and <code>fragmentation_long</code> calcualte fragmentation features, (for a single vector amd whole dataset respectively). The argument <code>metrics</code>, which consists of “mean_bout”, “TP”, “Gini”, “hazard”, “power”, and “all” decides which metrics to calcualte. “all” will lead to all metrics.</p>
<p>For a single day of count (a vector):</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">example_activity_data</span><span class="op">)</span>
<span class="va">count1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/t.html" class="external-link">t</a></span><span class="op">(</span><span class="va">example_activity_data</span><span class="op">$</span><span class="va">count</span><span class="op">[</span><span class="fl">1</span>,<span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>
<span class="va">wear1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/t.html" class="external-link">t</a></span><span class="op">(</span><span class="va">example_activity_data</span><span class="op">$</span><span class="va">wear</span><span class="op">[</span><span class="fl">1</span>,<span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>
<span class="va">mb</span> <span class="op">=</span> <span class="fu"><a href="../reference/fragmentation.html">fragmentation</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">count1</span>, w <span class="op">=</span> <span class="va">wear1</span>, thresh <span class="op">=</span> <span class="fl">100</span>, metrics <span class="op">=</span> <span class="st">"mean_bout"</span>,bout.length <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>
<span class="va">tp</span> <span class="op">=</span> <span class="fu"><a href="../reference/fragmentation.html">fragmentation</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">count1</span>, w <span class="op">=</span> <span class="va">wear1</span>, thresh <span class="op">=</span> <span class="fl">100</span>, metrics <span class="op">=</span> <span class="st">"TP"</span>,bout.length <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></code></pre></div>
<p>Given all the activity and wear/nonwear flag data for the whole dataset, user can choose to calcualte framentation at daily level, or aggregate bouts across all available days by choosing from either “subject” and “day” for the argument <code>by</code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">example_activity_data</span><span class="op">)</span>
<span class="va">count</span> <span class="op">=</span> <span class="va">example_activity_data</span><span class="op">$</span><span class="va">count</span>
<span class="va">wear</span> <span class="op">=</span> <span class="va">example_activity_data</span><span class="op">$</span><span class="va">wear</span>
<span class="va">frag_by_subject</span> <span class="op">=</span> <span class="fu"><a href="../reference/fragmentation_long.html">fragmentation_long</a></span><span class="op">(</span>count.data <span class="op">=</span> <span class="va">count</span>, weartime <span class="op">=</span> <span class="va">wear</span>,thresh <span class="op">=</span> <span class="fl">100</span>, metrics <span class="op">=</span> <span class="st">"all"</span>,by <span class="op">=</span> <span class="st">"subject"</span>,bout.length <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>
<span class="va">frag_by_day</span> <span class="op">=</span> <span class="fu"><a href="../reference/fragmentation_long.html">fragmentation_long</a></span><span class="op">(</span>count.data <span class="op">=</span> <span class="va">count</span>, weartime <span class="op">=</span> <span class="va">wear</span>,thresh <span class="op">=</span> <span class="fl">100</span>, metrics <span class="op">=</span> <span class="st">"all"</span>,by <span class="op">=</span> <span class="st">"day"</span>,bout.length <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Junrui Di, John Muschelli, Vadim zipunnikov.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link external-link">pkgdown</a> 1.6.1.9001.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
